;==============================
;==========================================================
;
;   ██████╗  ██████╗ ██╗  ██╗   ██╗██████╗  █████╗ ██████╗
;   ██╔══██╗██╔═══██╗██║  ╚██╗ ██╔╝██╔══██╗██╔══██╗██╔══██╗
;   ██████╔╝██║   ██║██║   ╚████╔╝ ██████╔╝███████║██████╔╝
;   ██╔═══╝ ██║   ██║██║    ╚██╔╝  ██╔══██╗██╔══██║██╔══██╗
;   ██║     ╚██████╔╝███████╗██║   ██████╔╝██║  ██║██║  ██║
;   ╚═╝      ╚═════╝ ╚══════╝╚═╝   ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝
;
;   TOKYO NIGHT - DESKTOP
;
;==========================================================

;==========================================================
; CORES TOKYO NIGHT
;==========================================================

[colors]
background = #1a1b26
background-alt = #24283b
foreground = #c0caf5
foreground-alt = #a9b1d6
primary = #7aa2f7
secondary = #bb9af7
alert = #f7768e
warning = #e0af68
success = #9ece6a
cyan = #7dcfff
magenta = #bb9af7
disabled = #565f89
transparent = #00000000

;==========================================================
; BARRA PRINCIPAL
;==========================================================

[bar/main]
width = 100%
height = 30
radius = 0
fixed-center = true

monitor = ${env:MONITOR:}
monitor-strict = false
monitor-exact = true

background = ${colors.background}
foreground = ${colors.foreground}

line-size = 2
line-color = ${colors.primary}

border-size = 0
border-color = ${colors.background}

padding-left = 2
padding-right = 2

module-margin-left = 1
module-margin-right = 1

font-0 = JetBrainsMono Nerd Font:style=Regular:size=10;3
font-1 = JetBrainsMono Nerd Font:style=Bold:size=10;3
font-2 = Font Awesome 6 Free Solid:size=11;3
font-3 = Font Awesome 6 Brands:size=11;3

; Workspaces dos dois lados + ícones em cada módulo!
modules-left = i3 xwindow
modules-center = date music
modules-right = updates filesystem pulseaudio memory cpu gputemp docker powermenu

cursor-click = pointer
cursor-scroll = ns-resize
enable-ipc = true

bottom = false

tray-position = none
tray-padding = 2
tray-background = ${colors.background}
tray-maxsize = 16

wm-restack = i3
override-redirect = false

;==========================================================
; MÓDULO: i3 WORKSPACES ESQUERDA
;==========================================================
[module/i3]
type = internal/i3
format = <label-state> <label-mode>
index-sort = true
wrapping-scroll = false
strip-wsnumbers = true
pin-workspaces = true
ws-icon-0 =  ;
ws-icon-1 =  ;
ws-icon-2 =  ;
ws-icon-3 =  ;
ws-icon-4 =  ;
ws-icon-5 =  ;
ws-icon-6 =  ;
ws-icon-7 =  ;
ws-icon-8 =  ;
ws-icon-9 =  ;
ws-icon-default =  ;
label-focused = %icon%
label-focused-background = ${colors.background-alt}
label-focused-foreground = ${colors.primary}
label-focused-underline = ${colors.primary}
label-focused-padding = 2
label-visible = %icon%
label-visible-background = ${colors.background}
label-visible-foreground = ${colors.foreground-alt}
label-visible-padding = 2
label-unfocused = %icon%
label-unfocused-foreground = ${colors.disabled}
label-unfocused-padding = 2
label-urgent = %icon%
label-urgent-background = ${colors.alert}
label-urgent-foreground = ${colors.background}
label-urgent-padding = 2

;==========================================================
; MÓDULO: i3 WORKSPACES DIREITO
;==========================================================
[module/i3-right]
type = internal/i3
format = <label-state>
index-sort = true
strip-wsnumbers = true
pin-workspaces = true
ws-icon-0 =  ;
ws-icon-1 =  ;
ws-icon-2 =  ;
ws-icon-3 =  ;
ws-icon-4 =  ;
ws-icon-5 =  ;
ws-icon-6 =  ;
ws-icon-7 =  ;
ws-icon-8 =  ;
ws-icon-9 =  ;
ws-icon-default =  ;
label-focused = %icon%
label-focused-background = ${colors.primary}
label-focused-foreground = ${colors.background}
label-focused-underline = ${colors.secondary}
label-focused-padding = 2
label-visible = %icon%
label-visible-background = ${colors.background-alt}
label-visible-foreground = ${colors.secondary}
label-visible-padding = 2
label-unfocused = %icon%
label-unfocused-foreground = ${colors.disabled}
label-unfocused-padding = 2
label-urgent = %icon%
label-urgent-background = ${colors.alert}
label-urgent-foreground = ${colors.background}
label-urgent-padding = 2

;==========================================================
; MÓDULO: TÍTULO DA JANELA
;==========================================================
[module/xwindow]
type = internal/xwindow
label =   %title:0:50:...%
label-foreground = ${colors.foreground-alt}
label-padding = 1
label-empty =  Desktop
label-empty-foreground = ${colors.disabled}

;==========================================================
; MÓDULO: DATA E HORA
;==========================================================
[module/date]
type = internal/date
interval = 1
date = %d/%m/%Y
date-alt = %A, %d de %B
time = %H:%M
time-alt = %H:%M:%S
format-prefix = " "
format-prefix-foreground = ${colors.primary}
format-underline = ${colors.primary}
label = %date%  %time%

;==========================================================
; MÓDULO: UPDATES
;==========================================================
[module/updates]
type = custom/script
exec = ~/.config/polybar/scripts/updates.sh
interval = 600
format-prefix = " "
format-prefix-foreground = ${colors.cyan}
format-underline = ${colors.cyan}
click-left = alacritty -e sudo pacman -Syu

;==========================================================
; MÓDULO: FILESYSTEM
;==========================================================
[module/filesystem]
type = internal/fs
interval = 25
mount-0 = /
format-mounted =  <label-mounted>
format-mounted-prefix-foreground = ${colors.warning}
format-mounted-underline = ${colors.warning}
label-mounted = %percentage_used%%
format-unmounted =   <label-unmounted>
label-unmounted = %mountpoint%
label-unmounted-foreground = ${colors.disabled}

;==========================================================
; MÓDULO: PULSEAUDIO
;==========================================================
[module/pulseaudio]
type = internal/pulseaudio
use-ui-max = false
interval = 5
format-volume =  <label-volume>
format-volume-underline = ${colors.success}
label-volume = %percentage%%
format-muted =  <label-muted>
format-muted-prefix-foreground = ${colors.disabled}
format-muted-underline = ${colors.alert}
label-muted = muted
label-muted-foreground = ${colors.disabled}
ramp-volume-0 =
ramp-volume-1 =
ramp-volume-2 =
ramp-volume-foreground = ${colors.success}
click-right = pavucontrol

;==========================================================
; MÓDULO: MEMÓRIA RAM
;==========================================================
[module/memory]
type = internal/memory
interval = 3
format =  <label>
format-prefix-foreground = ${colors.secondary}
format-underline = ${colors.secondary}
label = %percentage_used%%

;==========================================================
; MÓDULO: CPU
;==========================================================
[module/cpu]
type = internal/cpu
interval = 2
format =  <label>
format-prefix-foreground = ${colors.cyan}
format-underline = ${colors.cyan}
label = %percentage%%

;==========================================================
; MÓDULO: GPU TEMPERATURA (NVIDIA)
;==========================================================
[module/gputemp]
type = custom/script
exec = ~/.config/polybar/scripts/gputemp.sh
interval = 5
format-prefix = " "
format-prefix-foreground = ${colors.alert}
format-underline = ${colors.alert}

;==========================================================
; MÓDULO: DOCKER
;==========================================================
[module/docker]
type = custom/script
exec = ~/.config/polybar/scripts/docker.sh
interval = 10
format-prefix = " "
format-prefix-foreground = ${colors.primary}
format-underline = ${colors.primary}
click-left = alacritty -e lazydocker

;==========================================================
; MÓDULO: POWER MENU
;==========================================================
[module/powermenu]
type = custom/menu
expand-right = true
format-spacing = 1
label-open = 
label-open-foreground = ${colors.alert}
label-close =  cancel
label-close-foreground = ${colors.alert}
label-separator = |
label-separator-foreground = ${colors.disabled}
menu-0-0 =  reboot
menu-0-0-exec = systemctl reboot
menu-0-1 =  shutdown
menu-0-1-exec = systemctl poweroff
menu-0-2 =  logout
menu-0-2-exec = i3-msg exit
menu-0-3 =  lock
menu-0-3-exec = i3lock -c 1a1b26

;==========================================================
; MÓDULO: MUSIC
;==========================================================

[module/music]
type = custom/script
exec = ~/.config/polybar/scripts/mpd_playerctl.sh
interval = 1

click-left = sh -lc 'p=$(playerctl -l | grep "^mpd" | head -n1); [ -n "$p" ] && playerctl --player="$p" play-pause'
click-right = sh -lc 'p=$(playerctl -l | grep "^mpd" | head -n1); [ -n "$p" ] && playerctl --player="$p" next'
click-middle = sh -lc 'p=$(playerctl -l | grep "^mpd" | head -n1); [ -n "$p" ] && playerctl --player="$p" previous'

scroll-up = sh -lc 'p=$(playerctl -l | grep "^mpd" | head -n1); [ -n "$p" ] && playerctl --player="$p" volume 0.05+'
scroll-down = sh -lc 'p=$(playerctl -l | grep "^mpd" | head -n1); [ -n "$p" ] && playerctl --player="$p" volume 0.05-'

;==========================================================
; CONFIGURAÇÕES
;==========================================================
[settings]
screenchange-reload = true
pseudo-transparency = false
[global/wm]
margin-top = 0
margin-bottom = 0

